{% extends 'base.html' %}


{% block content %}
{% if user.is_authenticated %}

<div class="dropdown text-end px-5 pb-2">
    <button class="btn add_fav_btn dropdown-toggle text-light background-green m-4" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Add Favorite Teams
    </button>

        
    <ul class="dropdown-menu">
        {% for team in teams %}
        {% if team.team.id in favorites %}
        {% else %}
            <form class="dropdown-item" action=" {% url 'favorite_team' team.team.id %} " method="post">
                {% csrf_token %}
            <i class="fa-regular fa-star"></i>
            <input class="btn" type="submit" value="{{ team.team.name }}">
            </form> 
        
        {% endif %}
        {% endfor %}
    </ul>
</div>

<!-- LIVE TABLE IDEA FOR ICEBOX -->
<!-- Button trigger modal -->
<!-- <button type="button" class="btn background-green" data-toggle="modal" data-target="#exampleModal">
    View Live Table
  </button>
  
  Modal
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Live Table</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Hello
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div> -->


<div class="container-fluid text-center"><h2 class="text-light px-3 background-red rounded">Favorite Teams</h2></div>
<div class="d-flex justify-content-center flex-column">

    {% for favorite in favorites %}
    {% for team in teams %}
    {% if favorite == team.team.id %}
    <br></br>
    <div class="row">
        <div class="container text-center">
            <a class="fav_team_home text-decoration-none text-dark h3 px-4" href=" {% url 'team_detail' team.team.id %} "><i class="fa-solid fa-star"></i> {{ team.team.name }}</a>
            <div class="d-flex flex-column justify-content-center">
                <div class="text-center background-green rounded">
                    {% for game in games %}
                    
                    {% if favorite == game.id %}

                        <p class="text-light h4 mt-2">
                            <image style="height:60px" src="{{ game.game.teams.home.logo }}"></image> <span>{{ game.game.teams.home.name }}</span> 
                            vs. <span>{{ game.game.teams.away.name }}</span> <image style="height:60px" src="{{ game.game.teams.away.logo }}"></image>
                        </p>
                        <p class="text-light"><i class="fa-regular fa-calendar"></i> {{ game.game.fixture.timestamp|date:"D, F j" }} at {{ game.game.fixture.timestamp|time:"f A T" }}</p>
                        <p class="text-light"><i class="fa-solid fa-location-pin"></i> {{ game.game.fixture.venue.name }} ({{ game.game.teams.home.name }})</p>
                        <p class="text-light"><i class="fa-solid fa-futbol"></i> Competition: {{ game.game.league.name }}</p>
                        <a class="btn home_view_game_btn background-red text-light m-2">View Game</a>
                    {% endif %}
                            
                    {% endfor %}
                </div>
            </div>


            
            
        </div>
    </div>
    {% endif %}
    {% endfor %}
    {% endfor %}
</div>
<br></br>

{% else %}


<div class="container-fluid text-center" style="min-height:80vh;">
    <br>
    <h5 class="text-light px-3 background-red rounded">You're not logged, log in to add teams.</h5>
    <br>
    <p class="px-3">GameDay uses live data to show you the latest on your favorite team including upcoming games, live games, previous games, rosters, team information, and more.</p>
    <p class="px-3">Users of GameDay have access to all Premier League teams and can engage with other fans online as they follow along. Log in now for access!</p>
</div>

{% endif %}


{% endblock content %}