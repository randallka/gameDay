{% extends 'base.html' %}


{% block content %}
{% if user.is_authenticated %}

<div class="dropdown text-end px-5 pb-2">
    <button class="btn add_fav_btn dropdown-toggle text-light background-green m-4" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Add Favorite Teams
    </button>

        
    <ul class="dropdown-menu">
        {% for team in teams %}
        {% if team.team.id in favorites %}
        {% else %}
            <form class="dropdown-item" action=" {% url 'favorite_team' team.team.id %} " method="post">
                {% csrf_token %}
            <input type="submit" value="{{ team.team.name }}">
            </form> 
        
        {% endif %}
        {% endfor %}
    </ul>
</div>
<div class="container-fluid text-center"><h2 class="text-light px-3 background-red">Favorite Teams</h2></div>
<div class="d-flex justify-content-center flex-column favorite-teams">

    {% for favorite in favorites %}
    {% for team in teams %}
    {% if favorite == team.team.id %}
    <br></br>
    <div class="container text-center" style="width: 50%;">
    <a class="text-decoration-none text-dark d-block h3 px-4" href=" {% url 'team_detail' team.team.id %} "><i class="fa-solid fa-star"></i> {{ team.team.name }}</a>
    <div class="d-flex flex-column justify-content-center">
        <div class="text-center background-green">
            {% for game in games %}
            
            {% if favorite == game.id %}

                <p class="text-light h4 mt-2">
                    <image style="height:60px" src="{{ game.game.teams.home.logo }}"></image> {{ game.game.teams.home.name }} vs. {{ game.game.teams.away.name }} <image style="height:60px" src="{{ game.game.teams.away.logo }}"></image>
                </p>
                <p class="text-light"><i class="fa-regular fa-calendar"></i> {{ game.game.fixture.timestamp|date:"D, F j" }} at {{ game.fixture.timestamp|time:"f A T" }}</p>
                <p class="text-light"><i class="fa-solid fa-location-pin"></i> {{ game.game.fixture.venue.name }} ({{ game.game.teams.home.name }})</p>
                <p class="text-light"><i class="fa-solid fa-futbol"></i> Competition: {{ game.game.league.name }}</p>
                <button class="btn view_game_btn background-red text-light m-2">View Game</button>
            {% endif %}
                    
            {% endfor %}
        </div>
    </div>
    </div>
    {% endif %}
    {% endfor %}
    {% endfor %}
</div>
<br></br>

{% else %}
<p style="height: 100%">You're not logged, log in to add teams</p>
{% endif %}


{% endblock content %}